<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Document</title>
</head>
<body>
    <div tabindex="0" class="first_step">
        <h1 id="time"></h1>
        <h2 style="font-weight: bold;" id="date"></h2>
    </div>
    <div class="second_step">
        <div class="login_card">
            <img src="https://placehold.co/100x100" alt="User Avatar" class="avatar">
            <h2 id="username" class="pin_text" style="font-weight: 500;"></h2>
            <h2 class="pin_text">Enter your password</h2>
            <input type="password" placeholder="Password" class="pin_input">
        </div>
        <a href="">I forgot my password</a>
        <a href="">Access options</a>
        <div class="user_list" id="user_list">
        </div>
    </div>
</div>

</body>
<script>
const time_text = document.getElementById("time");
const date_text = document.getElementById("date");
const firstStep = document.querySelector(".first_step");

const usernameDisplay = document.getElementById("username");
const userLocale = navigator.languages && navigator.languages.length ? navigator.languages[0] : navigator.language;
const now = new Date();
const options = { weekday: 'long', day: 'numeric', month: 'long' };
let users = [];
date_text.innerHTML = new Intl.DateTimeFormat(userLocale, options).format(now);

function new_user(name, image) {
    return {
        name:name,
        src:image
    }
}

function update_time() {
    const curr_date = new Date();
    const hours = String(curr_date.getHours()).padStart(2, '0');
    const minutes = String(curr_date.getMinutes()).padStart(2, '0');
    time_text.innerHTML = `${hours}:${minutes}`;
}

function createUserItem(usernameText, avatarUrl = 'https://placehold.co/50x50', altText = 'User') {
    users.push(new_user(usernameText, avatarUrl))
    const userItem = document.createElement('div');
    userItem.className = 'user_item';
    userItem.addEventListener("click", (e)=>{
        usernameDisplay.innerHTML = usernameText;
    })

    const avatar = document.createElement('img');
    avatar.src = avatarUrl;
    avatar.alt = altText;
    avatar.className = 'user_avatar_small';

    const username = document.createElement('span');
    username.textContent = usernameText;

    userItem.appendChild(avatar);
    userItem.appendChild(username);

    return userItem;
}

// Example usage
const container = document.getElementById('user_list');
container.appendChild(
    createUserItem('User 1',
    'https://placehold.co/50x50',
    'User 2'
));
container.appendChild(
    createUserItem('Riccardo Zappitelli',
    'https://placehold.co/50x50',
    'User 1'
));

usernameDisplay.innerHTML = users[0].name;

// Spacebar listener
firstStep.onkeydown = function(e) {
    if (e.key === " " || e.code === "Space" || e.keyCode === 32) {
        firstStep.classList.add("hidden");
    }
};
firstStep.onclick = ()=>{
    firstStep.classList.add("hidden");
}
update_time();
setInterval(update_time, 1000);

</script>
</html>